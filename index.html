<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta property="og:type" content="website">
<meta property="og:title" content="梦里键指如飞">
<meta property="og:url" content="http://differ-work.github.io/index.html">
<meta property="og:site_name" content="梦里键指如飞">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="梦里键指如飞">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://differ-work.github.io/">





  <title>梦里键指如飞</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">梦里键指如飞</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">规格严格，功夫到家</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://differ-work.github.io/spring-boot-start-flow-base-v1-5-4/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sigh differ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/css/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="梦里键指如飞">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/spring-boot-start-flow-base-v1-5-4/" itemprop="url">springboot应用启动过程分析(基于springboot 1.5.4)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-08T00:01:27+08:00">
                2018-11-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>springboot程序通过<code>SpringBootApplication</code>注解和Runner类中入口方法<code>main</code>执行<code>SpringApplication.run()</code>就可以执行起来，如下：<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoApplication</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">		SpringApplication.run(DemoApplication.class, args);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="内部代码分析"><a href="#内部代码分析" class="headerlink" title="内部代码分析"></a>内部代码分析</h2><p>通过DemoApplication <code>main</code>方法进入之后，过掉各种中间多态或抽象的过程，主要包括两个方法: <code>initializer</code>和<code>run</code></p>
<p>在启动过程中的各种Spring context和bean的配置，主要在spring-boot的 META-INF/spring.factories文件中</p>
<blockquote>
<p> META-INF中这个文件也是开发springboot插件的一个方式</p>
</blockquote>
<h3 id="initializer方法"><a href="#initializer方法" class="headerlink" title="initializer方法"></a>initializer方法</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SuppressWarnings</span>(&#123; <span class="string">"unchecked"</span>, <span class="string">"rawtypes"</span> &#125;)</span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">initialize</span><span class="params">(Object[] sources)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (sources != <span class="keyword">null</span> &amp;&amp; sources.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">		<span class="keyword">this</span>.sources.addAll(Arrays.asList(sources));</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">this</span>.webEnvironment = deduceWebEnvironment();</span><br><span class="line">	setInitializers((Collection) getSpringFactoriesInstances(</span><br><span class="line">			ApplicationContextInitializer.class));</span><br><span class="line">	setListeners((Collection) getSpringFactoriesInstances(ApplicationListener.class));</span><br><span class="line">	<span class="keyword">this</span>.mainApplicationClass = deduceMainApplicationClass();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>主要包含如下几个过程：</p>
<blockquote>
<ol>
<li>判断是否为web环境</li>
<li>设置初始化类(initializers, springboot 封装的 spring-context中的ApplicationContext列表)</li>
<li>设置监听器(listeners, spring封装的spring-context中的ApplicationListener列表)</li>
</ol>
</blockquote>
<h4 id="webEnvironment的过程"><a href="#webEnvironment的过程" class="headerlink" title="webEnvironment的过程"></a>webEnvironment的过程</h4><p>判断是否为web环境，主要是看有没有加载<code>javax.servlet.Servlet</code> 和 <code>org.springframework.web.context.ConfigurableWebApplicationContext</code>相关的类<br>另外，在DemoApplication的main方法中手动设置webEnvironment也会直接生效,如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    SpringApplication application = <span class="keyword">new</span> SpringApplication(DemoApplication.class);</span><br><span class="line">    application.setWebEnvironment(<span class="keyword">false</span>);</span><br><span class="line">    application.run(args);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="设置初始化类"><a href="#设置初始化类" class="headerlink" title="设置初始化类"></a>设置初始化类</h4><p>设置初始化类是通过SpringApplication中的方法<code>getSpringFactoriesInstances()</code>,参数为 <code>ApplicationContextInitializer.class</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> &lt;T&gt; Collection&lt;? extends T&gt; getSpringFactoriesInstances(Class&lt;T&gt; type,</span><br><span class="line">		Class&lt;?&gt;[] parameterTypes, Object... args) &#123;</span><br><span class="line">	ClassLoader classLoader = Thread.currentThread().getContextClassLoader();</span><br><span class="line">	<span class="comment">// Use names and ensure unique to protect against duplicates</span></span><br><span class="line">	Set&lt;String&gt; names = <span class="keyword">new</span> LinkedHashSet&lt;String&gt;(</span><br><span class="line">			SpringFactoriesLoader.loadFactoryNames(type, classLoader));</span><br><span class="line">	List&lt;T&gt; instances = createSpringFactoriesInstances(type, parameterTypes,</span><br><span class="line">			classLoader, args, names);</span><br><span class="line">	AnnotationAwareOrderComparator.sort(instances);</span><br><span class="line">	<span class="keyword">return</span> instances;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>SpringFactoriesLoader.loadFactoryNames</code>方法，获取了spring-boot包下的<code>META-INF/spring.factories</code>中的ApplicationListeners，主要包括:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">org.springframework.boot.ClearCachesApplicationListener</span><br><span class="line">org.springframework.boot.builder.ParentContextCloserApplicationListener</span><br><span class="line">org.springframework.boot.context.FileEncodingApplicationListener</span><br><span class="line">org.springframework.boot.context.config.AnsiOutputApplicationListener</span><br><span class="line">org.springframework.boot.context.config.ConfigFileApplicationListener</span><br><span class="line">org.springframework.boot.context.config.DelegatingApplicationListener</span><br><span class="line">org.springframework.boot.liquibase.LiquibaseServiceLocatorApplicationListener</span><br><span class="line">org.springframework.boot.logging.ClasspathLoggingApplicationListener</span><br><span class="line">org.springframework.boot.logging.LoggingApplicationListener</span><br></pre></td></tr></table></figure></p>
<p>//TODO  </p>
<h3 id="run方法"><a href="#run方法" class="headerlink" title="run方法"></a>run方法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">public ConfigurableApplicationContext run(String... args) &#123;</span><br><span class="line">	StopWatch stopWatch = new StopWatch();</span><br><span class="line">	stopWatch.start();</span><br><span class="line">	ConfigurableApplicationContext context = null;</span><br><span class="line">	FailureAnalyzers analyzers = null;</span><br><span class="line">	configureHeadlessProperty();</span><br><span class="line">	SpringApplicationRunListeners listeners = getRunListeners(args);</span><br><span class="line">	listeners.starting();</span><br><span class="line">	try &#123;</span><br><span class="line">		ApplicationArguments applicationArguments = new DefaultApplicationArguments(</span><br><span class="line">				args);</span><br><span class="line">		ConfigurableEnvironment environment = prepareEnvironment(listeners,</span><br><span class="line">				applicationArguments);</span><br><span class="line">		Banner printedBanner = printBanner(environment);</span><br><span class="line">		context = createApplicationContext();</span><br><span class="line">		analyzers = new FailureAnalyzers(context);</span><br><span class="line">		prepareContext(context, environment, listeners, applicationArguments,</span><br><span class="line">				printedBanner);</span><br><span class="line">		refreshContext(context);</span><br><span class="line">		afterRefresh(context, applicationArguments);</span><br><span class="line">		listeners.finished(context, null);</span><br><span class="line">		stopWatch.stop();</span><br><span class="line">		if (this.logStartupInfo) &#123;</span><br><span class="line">			new StartupInfoLogger(this.mainApplicationClass)</span><br><span class="line">					.logStarted(getApplicationLog(), stopWatch);</span><br><span class="line">		&#125;</span><br><span class="line">		return context;</span><br><span class="line">	&#125;</span><br><span class="line">	catch (Throwable ex) &#123;</span><br><span class="line">		handleRunFailure(context, listeners, analyzers, ex);</span><br><span class="line">		throw new IllegalStateException(ex);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>========  未完待续  =========</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://differ-work.github.io/java-concurrent-brief/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sigh differ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/css/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="梦里键指如飞">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/java-concurrent-brief/" itemprop="url">Java并发编程概要</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-11-06T23:55:10+08:00">
                2018-11-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Java并发编程主要用到java.util.concurrent包下的类，主要结构如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">java.util.concurrent</span><br><span class="line">                |----atomic</span><br><span class="line">                |----locks</span><br><span class="line">                |----各种类</span><br></pre></td></tr></table></figure></p>
<p>如果再深入，还需要了解sun.misc.Unsafe、CAS、内存可见性、JMM重排序等。</p>
<h2 id="Java并发包概述"><a href="#Java并发包概述" class="headerlink" title="Java并发包概述"></a>Java并发包概述</h2><h3 id="java-util-concurrent-atomic"><a href="#java-util-concurrent-atomic" class="headerlink" title="java.util.concurrent.atomic"></a>java.util.concurrent.atomic</h3><p>主要为线程安全的原子性类,Atomic开头，如AtomicInteger</p>
<h3 id="java-util-concurrent-locks"><a href="#java-util-concurrent-locks" class="headerlink" title="java.util.concurrent.locks"></a>java.util.concurrent.locks</h3><p>锁，最主要的是AbstractQueuedSynchronizer这个抽象类，另外是ReentrantLock、ReentrantReadWriteLock等用于实现锁的类</p>
<h3 id="java-util-concurrent"><a href="#java-util-concurrent" class="headerlink" title="java.util.concurrent.*"></a>java.util.concurrent.*</h3><p>多线程的工具类，可以分为以下几类:</p>
<blockquote>
<p>1、如 ConcurrentHashMap、ArrayBlockingQueue、ConcurrentLinkedQueue等;<br>2、线程池相关，如ThreadPoolExecutor;<br>3、多线程协作的并发类，如FutureTask、CountDownLatch、CyclicBarrier等</p>
</blockquote>
<h2 id="Java并发包类层次关系"><a href="#Java并发包类层次关系" class="headerlink" title="Java并发包类层次关系"></a>Java并发包类层次关系</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TODO 待续</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://differ-work.github.io/java-cryptography/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sigh differ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/css/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="梦里键指如飞">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/java-cryptography/" itemprop="url">Java加解密技术</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-09-08T00:52:59+08:00">
                2018-09-08
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="说在前面"><a href="#说在前面" class="headerlink" title="说在前面"></a>说在前面</h2><p>Java加解密技术是在Java中对密码学的一种实现，但密码学本身是有很多方面的内容。  </p>
<h3 id="什么是加解密技术"><a href="#什么是加解密技术" class="headerlink" title="什么是加解密技术"></a>什么是加解密技术</h3><p>以下是维基上密码学的定义：</p>
<blockquote>
<p>Cryptography or cryptology is the practice and study of techniques for secure communication in the presence of third parties called adversaries. More generally, cryptography is about constructing and analyzing protocols that prevent third parties or the public from reading private messages; various aspects in information security such as data confidentiality, data integrity, authentication, and non-repudiation are central to modern cryptography. Modern cryptography exists at the intersection of the disciplines of mathematics, computer science, electrical engineering, communication science, and physics. Applications of cryptography include electronic commerce, chip-based payment cards, digital currencies, computer passwords, and military communications.</p>
</blockquote>
<blockquote>
<p>密码学是针对信息不被第三方获得的安全传输实践和研究。通常，密码学是关于构造和分析协议，以防止第三方或公众读取私有消息;在信息安全的各个方面，如数据机密性、数据完整性、身份验证和不可否认性，是现代密码学的核心。现代密码学存在于数学、计算机科学、电子工程、通信科学。。。</p>
</blockquote>
<p>以上讲了三点：</p>
<blockquote>
<p>信息<br>传输<br>安全</p>
</blockquote>
<p>简单一句话：密码学就是安全地把信息传给对方(不相关的第三方无法获取你传出去的真实内容)  </p>
<p>密码学有一套丰富的参考模型，里面包含了八大安全机制：</p>
<blockquote>
<ol>
<li>加密机制  </li>
<li>数字签名机制</li>
<li>访问控制机制</li>
<li>数据完整性机制</li>
<li>认证机制  </li>
<li>业务流填充机身</li>
<li>路由控制机制 </li>
<li>公证机制</li>
</ol>
</blockquote>
<p>这里面只讨论加密钥相关的内容(你加密完，我收到后解密成原来的内容)，针对密码学中的其他内容，后续文章再做讨论。</p>
<h3 id="加解密的分类"><a href="#加解密的分类" class="headerlink" title="加解密的分类"></a>加解密的分类</h3><h4 id="按密码体制"><a href="#按密码体制" class="headerlink" title="按密码体制"></a>按密码体制</h4><p>这是一般常说的一种分法，主要是<code>对称密码体制</code>和<code>非对称密码体制</code></p>
<blockquote>
<ol>
<li>对称：加密和解密所用的密钥相同</li>
<li>非对称：加密和密钥所用的不同，密钥分别叫做公钥、私钥。公钥向可以公开，用来做加密，密钥是保密的，用来做解密。</li>
</ol>
</blockquote>
<h4 id="按明文的处理方法"><a href="#按明文的处理方法" class="headerlink" title="按明文的处理方法"></a>按明文的处理方法</h4><p>主要分为<code>分组密码</code>和<code>流密码</code></p>
<blockquote>
<ol>
<li>分组密码：加密的时候把明文分成固定长度的几块，用同一个密钥和算法，将不同的分组块用这同一个密钥和算法进行加密处理。</li>
<li>流密码：加密的时候按位或字节加密明文。</li>
</ol>
</blockquote>
<h2 id="Java对密码学的支持"><a href="#Java对密码学的支持" class="headerlink" title="Java对密码学的支持"></a>Java对密码学的支持</h2><p>主要三方面： 1. java API，2. JavaEE容器， 3. Java工具</p>
<h3 id="Java-API"><a href="#Java-API" class="headerlink" title="Java API"></a>Java API</h3><p>Java中有很多接口和实现类上的支持，如</p>
<blockquote>
<ol>
<li>MessageDigest类，做信息的一个摘要，一般有MD5和SHA</li>
<li>Mac和Cipher两个类， Mac类，构建HMAC加密算法，Cipher可以构建DES、AES、RSA等加密算法</li>
<li>Signature类，用于做数字签名和验证</li>
<li>Certificate类，主要操作证书。</li>
</ol>
</blockquote>
<h3 id="JavaEE容器"><a href="#JavaEE容器" class="headerlink" title="JavaEE容器"></a>JavaEE容器</h3><p>比如Tomcat，只需要简单做一些基本的配置，就可以实现HTTPS的应用。</p>
<h3 id="Java工具"><a href="#Java工具" class="headerlink" title="Java工具"></a>Java工具</h3><p>keytool命令(跟javac等一起在JDK中)可以实现密钥、证书的管理，如生成、导出等。</p>
<h2 id="Java中几种常见加解密的实现"><a href="#Java中几种常见加解密的实现" class="headerlink" title="Java中几种常见加解密的实现"></a>Java中几种常见加解密的实现</h2><h3 id="一些说明"><a href="#一些说明" class="headerlink" title="一些说明"></a>一些说明</h3><p>理论上，密钥的长度是范围比较广的，但由于美国出口的限制(JCE)，一些长度JDK中默认不支持的，如果需要，可以通过替换JRE中JCE(local_policy.jar, US_export_policy.jar 两个文件, 可在<a href="http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html" target="_blank" rel="noopener">Oracle官网</a>下载) 来支持其他长度。<br>当然，本地JDK/JRE中的java.security文件中最好也关注一下。</p>
<table>
<thead>
<tr>
<th>算法</th>
<th>理论长度</th>
<th>实际支持长度</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>DES</td>
<td>值域：{56, 128}</td>
<td>56</td>
<td>JCE限制</td>
</tr>
<tr>
<td>AES</td>
<td>值域：{128, 192, 256}</td>
<td>128</td>
<td>JCE限制</td>
</tr>
<tr>
<td>RSA</td>
<td>区间： [512, 16384]</td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="密钥的生成"><a href="#密钥的生成" class="headerlink" title="密钥的生成"></a>密钥的生成</h3><p>主要包括对称加，非对称和椭圆签名算法。<br>以下用到的两个第三方类为:<br><code>org.apache.commons.codec.binary.Base64</code><br><code>org.bouncycastle.jce.provider.BouncyCastleProvider</code>  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生成对称加密密钥</span></span><br><span class="line"><span class="comment">   * algorithm支持 DES, AES两个</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">symmetricKeyGenerator</span><span class="params">(String algorithm, <span class="keyword">int</span> keySize)</span> </span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">    Provider provider = <span class="keyword">new</span> BouncyCastleProvider();</span><br><span class="line">    KeyGenerator generator = KeyGenerator.getInstance(algorithm);</span><br><span class="line">    generator.init(keySize);</span><br><span class="line">    SecretKey secretKey = generator.generateKey();</span><br><span class="line">    <span class="keyword">return</span> Base64.encodeBase64String(secretKey.getEncoded());</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生成非对称加密密钥</span></span><br><span class="line"><span class="comment">   * algorithm支持 RSA</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String,String&gt; <span class="title">asymmetricKeyPairGenerator</span><span class="params">(String algorithm, <span class="keyword">int</span> keySize)</span></span></span><br><span class="line"><span class="function">      <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance(algorithm);</span><br><span class="line">    keyPairGenerator.initialize(keySize);</span><br><span class="line">    KeyPair keyPair = keyPairGenerator.generateKeyPair();</span><br><span class="line">    Map&lt;String, String&gt; keys = <span class="keyword">new</span> HashMap();</span><br><span class="line">    keys.put(<span class="string">"privateKey"</span>, Base64.encodeBase64String(keyPair.getPrivate().getEncoded());</span><br><span class="line">    keys.put(<span class="string">"publicKey"</span>, Base64.encodeBase64String(keyPair.getPublic().getEncoded());</span><br><span class="line">    <span class="keyword">return</span> keys;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">   * 生成椭圆验签密钥</span></span><br><span class="line"><span class="comment">   * algorithm支持 ECDSA</span></span><br><span class="line"><span class="comment">   */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Map&lt;String,String&gt; <span class="title">ecdsaKeyPairGenerator</span><span class="params">(String algorithm, <span class="keyword">int</span> keySize)</span></span></span><br><span class="line"><span class="function">      <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    Provider provider = <span class="keyword">new</span> BouncyCastleProvider();</span><br><span class="line">    KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance(algorithm, provider);</span><br><span class="line">    keyPairGenerator.initialize(keySize);</span><br><span class="line">    KeyPair keyPair = keyPairGenerator.generateKeyPair();</span><br><span class="line">    Map&lt;String, String&gt; keys = <span class="keyword">new</span> HashMap();</span><br><span class="line">    keys.put(<span class="string">"privateKey"</span>, Base64.encodeBase64String(keyPair.getPrivate().getEncoded());</span><br><span class="line">    keys.put(<span class="string">"publicKey"</span>, Base64.encodeBase64String(keyPair.getPublic().getEncoded());</span><br><span class="line">    <span class="keyword">return</span> keys;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="加密与解密"><a href="#加密与解密" class="headerlink" title="加密与解密"></a>加密与解密</h3><p>DES加密与解密<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">encrypt</span><span class="params">(String data, String key)</span></span></span><br><span class="line"><span class="function">      <span class="keyword">throws</span> NoSuchPaddingException,</span></span><br><span class="line"><span class="function">              NoSuchAlgorithmException,</span></span><br><span class="line"><span class="function">              InvalidKeyException,</span></span><br><span class="line"><span class="function">              BadPaddingException,</span></span><br><span class="line"><span class="function">              IllegalBlockSizeException,</span></span><br><span class="line"><span class="function">              IOException</span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">byte</span>[] keyBytes;</span><br><span class="line">  keyBytes = <span class="keyword">new</span> BASE64Decoder().decodeBuffer(key);</span><br><span class="line">  Key k = <span class="keyword">new</span> SecretKeySpec(keyBytes, <span class="string">"DES"</span>);</span><br><span class="line">  Cipher cipher = Cipher.getInstance(<span class="string">"DES"</span>);</span><br><span class="line">  cipher.init(Cipher.ENCRYPT_MODE, k);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> BASE64Encoder().encode(cipher.doFinal(data.getBytes()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">decrypt</span><span class="params">(String data, String key)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> NoSuchPaddingException,</span></span><br><span class="line"><span class="function">                NoSuchAlgorithmException,</span></span><br><span class="line"><span class="function">                InvalidKeyException,</span></span><br><span class="line"><span class="function">                BadPaddingException,</span></span><br><span class="line"><span class="function">                IllegalBlockSizeException,</span></span><br><span class="line"><span class="function">                IOException</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">byte</span>[] keyBytes;</span><br><span class="line">    keyBytes = <span class="keyword">new</span> BASE64Decoder().decodeBuffer(key);</span><br><span class="line">    Key k = <span class="keyword">new</span> SecretKeySpec(keyBytes, <span class="string">"DES"</span>);</span><br><span class="line">    Cipher cipher = Cipher.getInstance(<span class="string">"DES"</span>);</span><br><span class="line">    cipher.init(Cipher.DECRYPT_MODE, k);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> String(cipher.doFinal(<span class="keyword">new</span> BASE64Decoder().decodeBuffer(data)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>AES加密与解密<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">encrypt</span><span class="params">(String data, String key)</span></span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> NoSuchPaddingException,</span></span><br><span class="line"><span class="function">            NoSuchAlgorithmException,</span></span><br><span class="line"><span class="function">            InvalidKeyException,</span></span><br><span class="line"><span class="function">            BadPaddingException,</span></span><br><span class="line"><span class="function">            IllegalBlockSizeException,</span></span><br><span class="line"><span class="function">            IOException</span>&#123;</span><br><span class="line">              </span><br><span class="line">  <span class="keyword">byte</span>[] keyBytes;</span><br><span class="line">  keyBytes = <span class="keyword">new</span> BASE64Decoder().decodeBuffer(key);</span><br><span class="line">  Key k = <span class="keyword">new</span> SecretKeySpec(keyBytes, <span class="string">"AES"</span>);</span><br><span class="line">  Cipher cipher = Cipher.getInstance(<span class="string">"AES/ECB/PKCS5Padding"</span>);</span><br><span class="line">  cipher.init(Cipher.ENCRYPT_MODE, k);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> BASE64Encoder().encode(cipher.doFinal(data.getBytes()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> String decrypt(String data, String key)</span><br><span class="line">      <span class="keyword">throws</span> NoSuchPaddingException,</span><br><span class="line">              NoSuchAlgorithmException,</span><br><span class="line">              InvalidKeyException,</span><br><span class="line">              BadPaddingException,</span><br><span class="line">              IllegalBlockSizeException,</span><br><span class="line">              IOException&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">byte</span>[] keyBytes;</span><br><span class="line">  keyBytes = <span class="keyword">new</span> BASE64Decoder().decodeBuffer(key);</span><br><span class="line">  Key k = <span class="keyword">new</span> SecretKeySpec(keyBytes, <span class="string">"AES"</span>);</span><br><span class="line">  Cipher cipher = Cipher.getInstance(<span class="string">"AES/ECB/PKCS5Padding"</span>);</span><br><span class="line">  cipher.init(Cipher.DECRYPT_MODE, k);</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> String(cipher.doFinal(<span class="keyword">new</span> BASE64Decoder().decodeBuffer(data)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>RSA加密与解密<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">encrypt</span><span class="params">(String body, String keyString)</span> </span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> NoSuchAlgorithmException,</span></span><br><span class="line"><span class="function">        NoSuchPaddingException,</span></span><br><span class="line"><span class="function">        InvalidKeySpecException,</span></span><br><span class="line"><span class="function">        InvalidKeyException,</span></span><br><span class="line"><span class="function">        BadPaddingException,</span></span><br><span class="line"><span class="function">        IllegalBlockSizeException,</span></span><br><span class="line"><span class="function">        IOException</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">byte</span>[] keyBytes;</span><br><span class="line">    keyBytes = <span class="keyword">new</span> BASE64Decoder().decodeBuffer(keyString);</span><br><span class="line">    KeyFactory keyFactory = KeyFactory.getInstance(<span class="string">"RSA"</span>);</span><br><span class="line">    Cipher cipher = Cipher.getInstance(<span class="string">"RSA"</span>);</span><br><span class="line"></span><br><span class="line">    PKCS8EncodedKeySpec keySpec = <span class="keyword">new</span> PKCS8EncodedKeySpec(keyBytes);</span><br><span class="line">    Key key = keyFactory.generatePrivate(keySpec);</span><br><span class="line">    cipher.init(Cipher.ENCRYPT_MODE, key);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> BASE64Encoder().encode(cipher.doFinal(body.getBytes()));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">decrypt</span><span class="params">(String body, String keyString)</span> </span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> NoSuchAlgorithmException,</span></span><br><span class="line"><span class="function">        NoSuchPaddingException,</span></span><br><span class="line"><span class="function">        InvalidKeySpecException,</span></span><br><span class="line"><span class="function">        InvalidKeyException,</span></span><br><span class="line"><span class="function">        BadPaddingException,</span></span><br><span class="line"><span class="function">        IllegalBlockSizeException,</span></span><br><span class="line"><span class="function">        IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">byte</span>[] keyBytes;</span><br><span class="line">    keyBytes = <span class="keyword">new</span> BASE64Decoder().decodeBuffer(keyString);</span><br><span class="line">    KeyFactory keyFactory = KeyFactory.getInstance(<span class="string">"RSA"</span>);</span><br><span class="line">    Cipher cipher = Cipher.getInstance(<span class="string">"RSA"</span>);</span><br><span class="line"></span><br><span class="line">    Key key;</span><br><span class="line"></span><br><span class="line">    X509EncodedKeySpec keySpec = <span class="keyword">new</span> X509EncodedKeySpec(keyBytes);</span><br><span class="line">    key = keyFactory.generatePublic(keySpec);</span><br><span class="line">    cipher.init(Cipher.DECRYPT_MODE, key);</span><br><span class="line">    <span class="keyword">return</span>  <span class="keyword">new</span> String(cipher.doFinal(<span class="keyword">new</span> BASE64Decoder().decodeBuffer(body)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="加签与验签"><a href="#加签与验签" class="headerlink" title="加签与验签"></a>加签与验签</h3><p>RSA加签与验签<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">sign</span><span class="params">(String body, String keyString)</span> </span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> NoSuchAlgorithmException,</span></span><br><span class="line"><span class="function">        InvalidKeySpecException,</span></span><br><span class="line"><span class="function">        InvalidKeyException,</span></span><br><span class="line"><span class="function">        SignatureException,</span></span><br><span class="line"><span class="function">        IOException </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">byte</span>[] keyBytes;</span><br><span class="line">    keyBytes = <span class="keyword">new</span> BASE64Decoder().decodeBuffer(keyString);</span><br><span class="line">    KeyFactory keyFactory = KeyFactory.getInstance(<span class="string">"RSA"</span>);</span><br><span class="line">    PKCS8EncodedKeySpec keySpec = <span class="keyword">new</span> PKCS8EncodedKeySpec(keyBytes);</span><br><span class="line">    PrivateKey privateKey = keyFactory.generatePrivate(keySpec);</span><br><span class="line"></span><br><span class="line">    Signature signature = Signature.getInstance(<span class="string">"MD5withRSA"</span>);</span><br><span class="line"></span><br><span class="line">    signature.initSign(privateKey);</span><br><span class="line">    signature.update(body.getBytes());</span><br><span class="line">    <span class="keyword">return</span> Base64.encodeBase64String(signature.sign());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">verify</span><span class="params">(String key, String data, String sign)</span></span></span><br><span class="line"><span class="function">        <span class="keyword">throws</span> NoSuchAlgorithmException, </span></span><br><span class="line"><span class="function">        InvalidKeySpecException, </span></span><br><span class="line"><span class="function">        InvalidKeyException, </span></span><br><span class="line"><span class="function">        SignatureException </span>&#123;</span><br><span class="line"></span><br><span class="line">    X509EncodedKeySpec x509KeySpec = <span class="keyword">new</span> X509EncodedKeySpec(Base64.decodeBase64(key));</span><br><span class="line"></span><br><span class="line">    Provider provider = <span class="keyword">new</span> BouncyCastleProvider();</span><br><span class="line"></span><br><span class="line">    KeyFactory keyFactory = KeyFactory.getInstance(<span class="string">"RSA"</span>, provider);</span><br><span class="line">    PublicKey publicKey = keyFactory.generatePublic(x509KeySpec);</span><br><span class="line">    Signature signature = Signature.getInstance(<span class="string">"MD5withRSA"</span>, provider);</span><br><span class="line"></span><br><span class="line">    signature.initVerify(publicKey);</span><br><span class="line">    signature.update(data.getBytes());</span><br><span class="line">    <span class="keyword">return</span> signature.verify(Base64.decodeBase64(sign));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>ECDSA加签与验签<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">sign</span><span class="params">(String key, String data)</span> </span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> NoSuchAlgorithmException, </span></span><br><span class="line"><span class="function">        InvalidKeySpecException, </span></span><br><span class="line"><span class="function">        InvalidKeyException, </span></span><br><span class="line"><span class="function">        SignatureException </span>&#123;</span><br><span class="line"></span><br><span class="line">    PKCS8EncodedKeySpec pkcs8KeySpec = <span class="keyword">new</span> PKCS8EncodedKeySpec(Base64.decodeBase64(key));</span><br><span class="line"></span><br><span class="line">    Provider provider = <span class="keyword">new</span> BouncyCastleProvider();</span><br><span class="line"></span><br><span class="line">    KeyFactory keyFactory = KeyFactory.getInstance(<span class="string">"ECDSA"</span>, provider);</span><br><span class="line">    PrivateKey privateKey = keyFactory.generatePrivate(pkcs8KeySpec);</span><br><span class="line">    Signature signature = Signature.getInstance(<span class="string">"ECDSA"</span>, provider);</span><br><span class="line"></span><br><span class="line">    signature.initSign(privateKey);</span><br><span class="line">    signature.update(data.getBytes());</span><br><span class="line">    <span class="keyword">return</span> Base64.encodeBase64String(signature.sign());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">verify</span><span class="params">(String key, String data, String sign)</span> </span></span><br><span class="line"><span class="function">    <span class="keyword">throws</span> NoSuchAlgorithmException, </span></span><br><span class="line"><span class="function">        InvalidKeySpecException, </span></span><br><span class="line"><span class="function">        InvalidKeyException, </span></span><br><span class="line"><span class="function">        SignatureException </span>&#123;</span><br><span class="line"></span><br><span class="line">    X509EncodedKeySpec x509KeySpec = <span class="keyword">new</span> X509EncodedKeySpec(Base64.decodeBase64(key));</span><br><span class="line"></span><br><span class="line">    Provider provider = <span class="keyword">new</span> BouncyCastleProvider();</span><br><span class="line"></span><br><span class="line">    KeyFactory keyFactory = KeyFactory.getInstance(<span class="string">"ECDSA"</span>, provider);</span><br><span class="line">    PublicKey publicKey = keyFactory.generatePublic(x509KeySpec);</span><br><span class="line">    Signature signature = Signature.getInstance(<span class="string">"ECDSA"</span>, provider);</span><br><span class="line"></span><br><span class="line">    signature.initVerify(publicKey);</span><br><span class="line">    signature.update(data.getBytes());</span><br><span class="line">    <span class="keyword">return</span> signature.verify(Base64.decodeBase64(sign));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>以上代码都在我的github里面 <a href="https://github.com/wangtingbang/cryptography" target="_blank" rel="noopener">wangtingbang/cryptography</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://differ-work.github.io/programing-tool-list/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="sigh differ">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/css/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="梦里键指如飞">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/programing-tool-list/" itemprop="url">编程工具及插件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-09-25T14:25:49+08:00">
                2015-09-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我工作中主要用到Java、Shell，以及后来由于工作需要不得不用的JavaScript，偶尔也会用到Python处理一些脚本性的东西。</p>
<p>在开发的时候，听说过Google style之后，都会将tab制表符换成两个空格，这个对我来说已成惯例。</p>
<blockquote>
<ol>
<li>IDE– Intellij Idea</li>
<li>文本编辑器  – Vim、Atom</li>
<li>Shell – iTerm2、zsh、mtux、Solarized Dark</li>
<li>Git – git命令行、Github Desktop/SourceTree</li>
<li>编程字体 – SourceCodePro、mplus(m+)、Anonymous Pro</li>
</ol>
</blockquote>
<h2 id="IDE-–-IntelliJ-Idea"><a href="#IDE-–-IntelliJ-Idea" class="headerlink" title="IDE – IntelliJ Idea"></a>IDE – IntelliJ Idea</h2><p>原先是用Eclipse JavaEE版本的，用的时候感觉加载不必要的插件太慢，后来听说Idea后改用了一下，确实挺不错的。<br>不管是在代码提示、处理性能方面，都比Eclipse要好一些。这是由于Idea后台会运行一些线程做一些工作，将顿卡的问题在后台处理掉，不过这个也有弊端，就是机器发热比较大。</p>
<p>Idea的上手成本可能有点高，他大部分快捷键是Mac风格，跟Eclipse还是有比较大的差异的，不过习惯之后确实非常好用。</p>
<p>Idea有社区版、收费的Ultimate版本，还有教育版本。</p>
<h2 id="文本编辑器-–-Vim-MacVim-、Atom"><a href="#文本编辑器-–-Vim-MacVim-、Atom" class="headerlink" title="文本编辑器 – Vim(MacVim)、Atom"></a>文本编辑器 – Vim(MacVim)、Atom</h2><h3 id="Vim"><a href="#Vim" class="headerlink" title="Vim"></a>Vim</h3><p>在接触Vim之后确实恋上了，这个不用多说，大家都知道。用Solarized Dark主题，没有装太多的插件，因为我一般主要是用来处理一些文本的东西，看看日志之类的。</p>
<h3 id="Atom"><a href="#Atom" class="headerlink" title="Atom"></a>Atom</h3><p>github旗下的Atom确实很让人喜欢，之前比较喜欢Sublime Text，但在接触Atom之后，就对这个编辑器爱不释手。以Node为核心，完全的一个Web应用但能以App的形式运行，确实让人惊奇。</p>
<h4 id="Atom让我喜欢的地方"><a href="#Atom让我喜欢的地方" class="headerlink" title="Atom让我喜欢的地方"></a>Atom让我喜欢的地方</h4><blockquote>
<ol>
<li>界面<br>我是一个喜欢游戏的人，在游戏的载入画面中如果有一些技巧、提示之类的东西，会让我对这个游戏有更好的认同感。<br>Atom就是这样一个东西，当你把所有Tab页关掉之后，他有一人各种功能、快捷键的提示。</li>
<li>快捷键<br>Atom快捷键跟我用的其他工具比较接近，用起来感觉顺手一些。这是个见仁见智的问题了吧。</li>
<li>代码提示<br>这个功能确实很爽，在不需要装太多插件的前提下就能实现。<br>在之前某处代码有命名一个变量的话，在后续编码过程中只要输入不超过3个字母就能提示这个变量，这确实很吸引我种不喜欢一个字一个字码代码的人。</li>
</ol>
</blockquote>
<h4 id="我的Atom插件"><a href="#我的Atom插件" class="headerlink" title="我的Atom插件"></a>我的Atom插件</h4><blockquote>
<ol>
<li>VIM-Mode<br>像vim一样实现键盘控制，不过目前这个插件还不支持命令模式，经常输入:w发现没有效果。</li>
<li>markdown-preview-plus<br>用来写blog， ctrl+shift+m打开，挺好用的，即时查看。<br>缺点就是不能移出去，对于我13寸的屏幕来说确实有点拥挤。</li>
</ol>
</blockquote>
<h2 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h2><h3 id="终端-iTerm2"><a href="#终端-iTerm2" class="headerlink" title="终端 - iTerm2"></a>终端 - iTerm2</h3><p>嗯，这个有什么好的，目前我也还没有体会到，只是当初在网上找的时候发现很多人都说这个错，配合mtux+zsh是神器之类的，所以就开始用了。目前发现确实还是挺好用的，比默认的Terminal之类的要方便一些，毕竟有一些快捷键和功能确实挺不错。</p>
<h3 id="Shell-zsh"><a href="#Shell-zsh" class="headerlink" title="Shell - zsh"></a>Shell - zsh</h3><p>以前接触Linx的时候只知道bash，后来找终端的时候看到有人介绍说zsh是很多程序员用必备的一个东西。<br>等到真正下下来安装完用了一段时间之后，确实感觉离不开了。</p>
<blockquote>
<ol>
<li>现成的主题，在github上有很多。只要将主题放到 ~/.oh-my-zsh/themes下之后，在 ~/.zshrc中配置一下就可以。不仅有对于git分支的显示，还有靓丽的色彩。<br>我的主题配置如下：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ZSH_THEME=<span class="string">"robbyrussell"</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li>对于git的集成。只要进入到git工程目录下，就会有对于git的各种命令行上的提示，比如这种：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">➜  /Users/wangtingbang/prog/git-work/wangtingbang.github.io git:(master) ✗</span><br></pre></td></tr></table></figure>
</li>
</ol>
</blockquote>
<blockquote>
<ol start="3">
<li>tab 党的福音<br>像对于各种目录，命令之类，不再需要从第一个字母开始输入，通过输入的几个字符，zsh就能自动匹配到目录、命令，如果有多个目录，多次按tab选定之后回车就行，甚至只要输入一个目录，回车一下就可以进入。</li>
</ol>
</blockquote>
<h3 id="mtux"><a href="#mtux" class="headerlink" title="mtux"></a>mtux</h3><p>目前没有感觉到哪有什么好处，对于这个我用得不太多。（感觉自己有点low）</p>
<h3 id="Solarized-Dark主题"><a href="#Solarized-Dark主题" class="headerlink" title="Solarized Dark主题"></a>Solarized Dark主题</h3><p>对于经常熬夜干活的人来说，这个暗色的主题还是挺不错的。</p>
<h2 id="代码管理-–-git"><a href="#代码管理-–-git" class="headerlink" title="代码管理 – git"></a>代码管理 – git</h2><p>用命令行的git基本就已经够用，但是命令行的git在版本对比功能（diff）上个人不太习惯，很多时候要借助于Github Desktop或者SourceTree</p>
<p>自己常用的代码管理过程中的git命令：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#用于clone远程代码库</span></span><br><span class="line">git <span class="built_in">clone</span> <span class="variable">$URL</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##-----更新代码Start----</span></span><br><span class="line"><span class="comment">#在很多文章甚于于git的各种代码的README中都能看到更新代码用git pull</span></span><br><span class="line"><span class="comment">#但pull的方式个人不习惯于用</span></span><br><span class="line"><span class="comment">#原因是刚开始用的时候这个命令把我自己本地的修改给覆盖了</span></span><br><span class="line"><span class="comment">#将远程代码取到本地，但不会更新到本地代码中</span></span><br><span class="line">git fetch</span><br><span class="line"></span><br><span class="line"><span class="comment">#-----将自己代码暂存----</span></span><br><span class="line">git stash</span><br><span class="line"></span><br><span class="line"><span class="comment">#rebase，将fetch下来的代码更新到本地，实际上是变了本地代码的头指针</span></span><br><span class="line">git rebase origin/<span class="variable">$BRANCH</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#将本地暂存的代码取出来，可能出来以后会发现有很多冲突(confilits)</span></span><br><span class="line">git stash pop</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">##----代码维护----</span></span><br><span class="line"><span class="comment">#简单地查看变更记录</span></span><br><span class="line">git <span class="built_in">log</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#对比本地文件FILE与代码库中的变更，一般用于自己修改过这个文件之类</span></span><br><span class="line">git diff -- <span class="variable">$FILE</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#代码冲突解决，或者自己误添加文件到提交中的后，这个用于解决冲突和恢复</span></span><br><span class="line">git reset HEAD <span class="variable">$FILE</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">##----代码提交----</span></span><br><span class="line"><span class="comment">#添加一个文件到提交中，也可以直接用git add . 这种比较暴力的方式把所有文件添加</span></span><br><span class="line">git add <span class="variable">$FILE</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 提交代码，这个提交只会保留在本地的git库中</span></span><br><span class="line">git commit -m <span class="string">"message"</span>  </span><br><span class="line"></span><br><span class="line"><span class="comment">#推送代码到远程服务器的BRANCH分支</span></span><br><span class="line">git push origin HEAD:refs/heads/<span class="variable">$BRANCH</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#也可以用这种方式推送代码</span></span><br><span class="line">git push origin <span class="variable">$BRANCH</span> <span class="comment">#也可以用这种方式推送代码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#当远程分支开启的code review之后以这种方式提交</span></span><br><span class="line">git push origin HEAD:refs/<span class="keyword">for</span>/<span class="variable">$BRANCH</span></span><br></pre></td></tr></table></figure></p>
<h2 id="编程字体"><a href="#编程字体" class="headerlink" title="编程字体"></a>编程字体</h2><h3 id="SourceCodePro"><a href="#SourceCodePro" class="headerlink" title="SourceCodePro"></a>SourceCodePro</h3><p>  在IDE、iTerm2、vim还是Atom中都有很不错的表现。</p>
<h3 id="mplus-m"><a href="#mplus-m" class="headerlink" title="mplus(m+)"></a>mplus(m+)</h3><p>  我主要在iTerm2中用，一行中能够显示比较多的字，这个字体的c、p、2c、2p等好多种，从细到粗都有，并且每一种的样式都有比较大的区别。适合在终端中使用，看日志、对比文件之类的时候非常好用。</p>
<h3 id="Anonymous-Pro"><a href="#Anonymous-Pro" class="headerlink" title="Anonymous Pro"></a>Anonymous Pro</h3><p>以前在Eclipse中用，字体整体比较细，略有尖锐的感觉，看上去比较显眼。</p>
<p>=============== 以下无正文 ==============</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/css/images/avatar.png" alt="sigh differ">
            
              <p class="site-author-name" itemprop="name">sigh differ</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">sigh differ</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
